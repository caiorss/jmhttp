<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>jmHttp Server</title>
<!-- 2018-06-20 Wed 09:07 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Caio Rodrigues" />
<meta  name="description" content="A portable cross-platform http web server for sharing file and directories on Local Network."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">jmHttp Server</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. jmtthp server - A micro scala/java Http server</a>
<ul>
<li><a href="#sec-1-1">1.1. Overview</a></li>
<li><a href="#sec-1-2">1.2. Usage</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1. Show help</a></li>
<li><a href="#sec-1-2-2">1.2.2. Running the server</a></li>
<li><a href="#sec-1-2-3">1.2.3. Dealing with Firewalls</a></li>
</ul>
</li>
<li><a href="#sec-1-3">1.3. Building Instructions</a>
<ul>
<li><a href="#sec-1-3-1">1.3.1. Building with sbt</a></li>
<li><a href="#sec-1-3-2">1.3.2. Building with jarget</a></li>
</ul>
</li>
<li><a href="#sec-1-4">1.4. Binary release</a></li>
<li><a href="#sec-1-5">1.5. <span class="todo TODO">TODO</span> Tasklist and future work</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> jmtthp server - A micro scala/java Http server</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<span class="underline">jmhttp server</span> - is a micro self-contained lightweight http server to
share files across local netork. It is useful to access shared files,
musics, pictures and directories from other computers, smartphones,
tablets and so on. This app can also serve static files at local
networkÂ· 
</p>

<ul class="org-ul">
<li><a href="https://github.com/caiorss/jmhttp">Project's Github repository.</a>
</li>
</ul>

<p>
Features: 
</p>

<ul class="org-ul">
<li><span class="underline">Self contained</span>: Just one file, one jar file, self-explanatory and
easy to use and deploy.
</li>

<li><span class="underline">No instalation required+</span>, it is ready to use and ready to
go. 
</li>

<li><span class="underline">Cross-platform</span>, as it runs on top of the Java Platform. So this
server can be run without recompiling and reinstalling on Linux,
Mac OSX, BSD or Windows.
</li>

<li><span class="underline">Serve static website</span> - The server can serve a static web site if
there is any file named index.html at the browsed directory. 
</li>

<li><span class="underline">Network service advertising</span> - The server can be advertised at
local network and made discoverable as networks printers, scanners,
cameras and etc, through zeroconf protocol (aka Apple's
Bounjour). So it can be located without knowing its network
address.
</li>

<li><span class="underline">SSL/TSL protocol support</span> -  TSL (Transport Secure Layer) or SSL
(Secure Socket Layer). It allows the http traffic between the
server and browser to be encrypted and secure.
</li>

<li><span class="underline">Basic Authenticatin login</span> 
</li>
</ul>


<p>
<b>WARNING</b>: 
</p>

<ul class="org-ul">
<li>The HTTP traffic without TLS/SSL is not encrypted, therefore, don't
use the server without SSL over the internet or at insecure or
public local networks.
</li>

<li>Basic Authentication should not be used without TLS/SSL as the
password and login are sent unencrypted as plain text.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Usage</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-sec-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Show help</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
The Jmhttp server is self-explanatory as it user-help text is
comprehensive and gives lots of examples.
</p>

<div class="org-src-container">

<pre class="src src-text">$ java -jar jmhttp-uber.jar 
jmhttp 1.4 - Micro http server for file sharing at local network.
Usage: $ jmhttp [COMMAND] [OPTIONS] [&lt;ARGS&gt; ...]

Commands:

  dir   Share single directory.                 
  mdir  Share multiple directories.             
  echo  Run echo server for debugging purposes
</pre>
</div>

<p>
Commands: 
</p>

<ul class="org-ul">
<li>dir - Share a single directories:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-text">$ java -jar jmhttp-uber.jar dir
Share single directory.

USAGE: $ jmhttp dir &lt;DIRECTORY

OPTIONS:
  -port=&lt;PORT&gt;,                  -p   Port that server will listen to. Default 8080                       
  -host=&lt;HOST&gt;,                  -    Host that server will listen to. Default 0.0.0.0 - All addresses.   
  -auth=&lt;USER&gt;:&lt;PASSWORD&gt;,       -    Authentication - default empty.                                     
  -tls=&lt;KEY STORE&gt;:&lt;PASSWORD&gt;,   -    Enable TLS (Transport Layer Security)/SSL. It encrypts connection.  
  -image,                        -im  Show images thumbnails in directory listing.                        
  -no-index,                     -ni  Don't render index.html if available in directory listing.          
  -publish,                      -    Publish server with multicast DNS (aka mdns, Zeroconf protocol.)    

EXAMPLES:
Share single directory /home/user/Documents at default port 8080
    listening all hosts. Note: (~) tilde is replaced by /home/&lt;user&gt; on Linux,
    /User/&lt;user&gt; on OSX and C:\\User\\&lt;user&gt; on Windows.

    &gt; $ jmhttp dir C:\\Users\\user\\Documents  (Windows)
    &gt; $ jmhttp dir /Users/dummy/documents
      or
    &gt; $ jmhttp ~/Documents

    Share single directory with authentication:

    It will serve the user home directory (~) tilde or /home/&lt;username&gt; on Linux,
    /Users/&lt;username&gt; on MacOSX and C:\\Users\\&lt;username&gt; on Windows with
    authentication requesting username john and password pxjmnf.
    The server will run on the port 8000.

    Note: Even with authentication is still not safe against network sniffers
    such as WireShark. To make the server secure, in addition to authentication,
    it is necessary to use TSL (Transport Secure Layer) option.
    The server can be opened in the web browser at the URL http://localhost:8080
    or http://127.0.0.1:8080 or http://computerIP:8080. When the server is using
    SSL/TLS the server URL is https://&lt;address&gt;:&lt;port&gt;

    &gt; $ jmhttp dir -p=8000 -publish -image -auth=john:pxjmnf tls=cert.jks:pass ~

    Explanation:
        + -p=8000             - Set server port to 8000
        + -publish            - Publish server address on Local network using multicast 
                                DNS or (Zeroconf / Bounjour)
        + -auth=john:pxjmnf   - Basic authentication (user john, password pxmnf)
        + -image              - Show images in the directory listening
        + -tls=cert.jks:pass  - Use the TSL certificate cert.jks to encrypt the connection.
                                &lt;pass&gt; is the certificate's password.

    Note: All command line parameters with (-) dash are optional.


    A TSL/SLL certificate can be generated on Linux or OSX using:

    $ keytool -genkeypair -keyalg RSA -alias sec_server \
       -keystore cert.jks \
       -storepass chargeit -validity 1000000 -keysize 2048
</pre>
</div>

<ul class="org-ul">
<li>mdir - Share multiple directories:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-text">$ java -jar jmhttp-uber.jar mdir
Share multiple directories.

USAGE: $ jmhttp mdir &lt;URL1:DIRECTORY1&gt; [&lt;URL2:DIRECTORY2&gt; ...]

OPTIONS:
  -port=&lt;PORT&gt;,                  -p   Port that server will listen to. Default 8080                       
  -host=&lt;HOST&gt;,                  -    Host that server will listen to. Default 0.0.0.0 - All addresses.   
  -auth=&lt;USER&gt;:&lt;PASSWORD&gt;,       -    Authentication - default empty.                                     
  -tls=&lt;KEY STORE&gt;:&lt;PASSWORD&gt;,   -    Enable TLS (Transport Layer Security)/SSL. It encrypts connection.  
  -image,                        -im  Show images thumbnails in directory listing.                        
  -no-index,                     -ni  Don't render index.html if available in directory listing.          
  -publish,                      -    Publish server with multicast DNS (aka mdns, Zeroconf protocol.)    

EXAMPLES:

    Share multiple directories using port 8090 and announcing server
    through mDNS multicast DNS Discovery service, aka Apple's Bounjour(&#174;)
    or Zeroconf. It will make the directory Documents available at
    http:&lt;addr&gt;:8090/docs and ~/Pictures at http:&lt;addr&gt;:8090/pics.

    &gt; $ jmthtp -p=8090 -publish docs:~/Documents pics:~/Pictures

    Share multiple directories with tsl/ssl (Transport Layer Security/
    Secure Socket Layer) encryption. It changes the server's URL to
    https://&lt;serveraddr&gt;:8080. It is no longer http://...

    &gt; $ jmhttp -p=8080 --tls=cert.jks:password -m docs:~/Documents pics:~/Pictures

   To generate the certificate use:

   $ keytool -genkeypair -keyalg RSA -alias sec_server \
       -keystore cert.jks \
       -storepass chargeit -validity 1000000 -keysize 2048
</pre>
</div>


<ul class="org-ul">
<li>echo - Run server in echo mode. The server answers all requests
by printing back the requests data. This command is useful for 
debugging http clients or learning more about http requests.
</li>
</ul>

<div class="org-src-container">

<pre class="src src-text">$ java -jar jmhttp-uber.jar echo -h
Run echo server for debugging purposes

USAGE: $ jmhttp echo 

OPTIONS:
  -port,   -p  Port that server will listen to. Default 8080                      
  -host,   -   Host that server will listen to. Default 0.0.0.0 - All addresses.  
  -auth,   -   Authentication - default empty.
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Running the server</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
By default, the server binds to port 8080. To change it to another port
run with -p=&lt;port number&gt;, for instance, -p=9090 to bind to port 9090.
</p>

<p>
<b>Example 1</b>
</p>

<p>
Share the directory /home/archbox/test to ~/test binding
the server to port 8080. The shared directory can accessed at
<a href="http://192.168.1.22:8080">http://192.168.1.22:8080</a> URL.
</p>

<div class="org-src-container">

<pre class="src src-sh">$ bin/jmhttp /home/archbox/test/
Server running at: http://192.168.0.3:8080
[2017-11-08 13:59:02] [INFO] - jmhttp.server.HttpServer run
 - Starting server at host = 0.0.0.0 and port = 8080 


[2017-11-08 13:59:33] [INFO] - jmhttp.server.HttpServer $<span class="org-variable-name">anonfun</span>$<span class="org-variable-name">run</span>$<span class="org-variable-name">2</span>
 - HTTP Request: path = / - method = GET - address = /0:0:0:0:0:0:0:1 

[2017-11-08 13:59:33] [INFO] - jmhttp.server.HttpServer $<span class="org-variable-name">anonfun</span>$<span class="org-variable-name">run</span>$<span class="org-variable-name">2</span>
 - HTTP Request: path = /favicon.ico - method = GET - address = /0:0:0:0:0:0:0:1 

... ... ... ...
</pre>
</div>


<div class="figure">
<p><a href="images/screenshot1.png"><img src="images/screenshot1.png" alt="screenshot1.png" /></a> 
</p>
</div>


<div class="figure">
<p><a href="images/screenshot2.png"><img src="images/screenshot2.png" alt="screenshot2.png" /></a>
</p>
</div>

<p>
On windows this sever can be run with: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ java -jar jmhttp C:\Users\arch\Desktop
<span class="org-comment-delimiter"># </span><span class="org-comment">or </span>
$ java -jar jmhttp ~/Desktop
</pre>
</div>

<p>
<b>Example 2</b>
</p>

<p>
Changing the port that server listen run:
</p>

<div class="org-src-container">

<pre class="src src-sh">$ jmhttp -p=9090 /home/archbox/test/
Server running at: http://192.168.0.3:9090
[2017-11-08 14:00:43] [INFO] - jmhttp.server.HttpServer run
 - Starting server at host = 0.0.0.0 and port = 9090 

[2017-11-08 14:00:58] [INFO] - jmhttp.server.HttpServer $<span class="org-variable-name">anonfun</span>$<span class="org-variable-name">run</span>$<span class="org-variable-name">2</span>
 - HTTP Request: path = /readerMonad.org - method = GET - address = /0:0:0:0:0:0:0:1 

[2017-11-08 14:00:58] [INFO] - jmhttp.server.HttpServer $<span class="org-variable-name">anonfun</span>$<span class="org-variable-name">run</span>$<span class="org-variable-name">2</span>
 - HTTP Request: path = /favicon.ico - method = GET - address = /0:0:0:0:0:0:0:1
</pre>
</div>

<p>
<b>Example 3</b>
</p>

<p>
Open the server website in the default browser after the server
start. It will open the server website at  <a href="http://192.168.0.3:9090">http://192.168.0.3:9090</a>
</p>

<div class="org-src-container">

<pre class="src src-sh">$ bin/jmhttp --browser -p=9090 /home/archbox/test/
Server running at: http://192.168.0.3:9090
[2017-11-08 14:02:21] [INFO] - jmhttp.server.HttpServer run
 - Starting server at host = 0.0.0.0 and port = 9090 

<span class="org-comment-delimiter"># </span><span class="org-comment">Or </span>

$ jmhttp --b -p=9090 /home/archbox/test/
Server running at: http://192.168.1.22:9090
</pre>
</div>

<p>
<b>Example 4</b>
</p>

<p>
Sharing multiple directories: 
</p>

<p>
It will make the directory contents of /home/archbox/opt be available
at the URL  <a href="http://192.168.1.22:8080/opt">http://192.168.1.22:8080/opt</a> and the directory contents of
/home/archbox/Documents/wiki  be available at <a href="http://192.168.1.22:8080/org">http://192.168.1.22:8080/org</a>. 
If there is any file named index.html in the wiki directory, it will
be displayed instead of showing the directory contents.
</p>

<div class="org-src-container">

<pre class="src src-sh">$ bin/jmhttp -m -b opt:/home/archbox/opt pics:/home/archbox/Pictures org:/home/archbox/Documents/wiki 
Server running at: http://192.168.1.22:8080
</pre>
</div>


<div class="figure">
<p><a href="images/screenshot3-shared-dirs.png"><img src="images/screenshot3-shared-dirs.png" alt="screenshot3-shared-dirs.png" /></a>
</p>
</div>


<div class="figure">
<p><a href="images/screenshot4-index.png"><img src="images/screenshot4-index.png" alt="screenshot4-index.png" /></a>
</p>
</div>


<p>
<b>Example 5</b> 
</p>

<p>
Too advertising the server at local network with multicast-DNS, zeroconf
(that Apple calls Boujour) just add the flag -publish. 
</p>


<div class="org-src-container">

<pre class="src src-sh">$ bin/jmhttp -publish -p=9090 opt:~/opt pics:~/Pictures org:/home/archbox/Documents/wiki
</pre>
</div>

<p>
The advertising with zeroconf allows the server to be accessed without
knowing or typing its IP address by using any Zeroconf browser,
android app with zeroconf for network service discovery or Mac OSX
Safari Zeroconf.
</p>


<div class="figure">
<p><a href="images/screenshot5-mac-osx-bounjour.png"><img src="images/screenshot5-mac-osx-bounjour.png" alt="screenshot5-mac-osx-bounjour.png" /></a>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Dealing with Firewalls</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
<b>Dealing with Firewall</b> 
</p>

<p>
In order to use the server it is necessary to disable the firewall or
create a rule to open the port while testing the server.
</p>

<ul class="org-ul">
<li><span class="underline">Dealing with firewall on Windows OS</span>: To opening the port 8080 on
Windows &gt; Windows 2008. Open a console cmd.exe as administrator and
copy and paste the command below. - Reference: <a href="https://wiki.mcneel.com/zoo/zoo5netsh">Open TCP Port 80 using Netsh</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh">rem Open TCP Port 8080 inbound and outbound
netsh advfirewall firewall add rule <span class="org-variable-name">name</span>=<span class="org-string">"jmhttp port 8080"</span> <span class="org-variable-name">dir</span>=in <span class="org-variable-name">action</span>=allow <span class="org-variable-name">protocol</span>=TCP <span class="org-variable-name">localport</span>=8080
</pre>
</div>


<ul class="org-ul">
<li><span class="underline">Dealing with firewall on Linux OS</span> 
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Stop firewall temporarily (Fedora) </span>
$ systemctl stop firewalld

<span class="org-comment-delimiter"># </span><span class="org-comment">Start firewall </span>
$ systemctl start firewalld

<span class="org-comment-delimiter"># </span><span class="org-comment">Disable Firewall from boot. </span>
$ systemctl disable firewalld
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Building Instructions</h3>
<div class="outline-text-3" id="text-1-3">
</div><div id="outline-container-sec-1-3-1" class="outline-4">
<h4 id="sec-1-3-1"><span class="section-number-4">1.3.1</span> Building with sbt</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Make sure the latest sbt is available in the system and run $ sbt makesh
</p>

<p>
Step 1: Enter project root directory.
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">cd</span> &lt;project-directory&gt;
</pre>
</div>

<p>
Step 2: Compile with $ sbt makesh. It generates the file ./jmhttp
which is placed at the project current directory; 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ sbt makesh
[info] Loading settings from idea.sbt,plugins.sbt ...
[info] Loading global plugins from /home/archbox/.sbt/1.0/plugins
[info] Loading settings from assembly.sbt ...
[info] Loading project definition from /home/archbox/Documents/projects/jmhttp.scala/project
[info] Loading settings from build.sbt ...
[info] Set current project to jmhttp (<span class="org-keyword">in</span> build file:/home/archbox/Documents/projects/jmhttp.scala/)
[info] Including from cache: jmdns-3.4.1.jar
[info] Including from cache: jmhttp-1.4.jar
[info] Including from cache: scala-library.jar
[info] Checking every *.class/*.jar file<span class="org-string">'s SHA-1.</span>
<span class="org-string">[info] Merging files...</span>
<span class="org-string">[warn] Merging '</span>META-INF/INDEX.LIST<span class="org-string">' with strategy '</span>discard<span class="org-string">'</span>
<span class="org-string">[warn] Merging '</span>META-INF/MANIFEST.MF<span class="org-string">' with strategy '</span>discard<span class="org-string">'</span>
<span class="org-string">[warn] Merging '</span>META-INF/maven/javax.jmdns/jmdns/pom.properties<span class="org-string">' with strategy '</span>discard<span class="org-string">'</span>
<span class="org-string">[warn] Merging '</span>META-INF/maven/javax.jmdns/jmdns/pom.xml<span class="org-string">' with strategy '</span>discard<span class="org-string">'</span>
<span class="org-string">[warn] Strategy '</span>discard<span class="org-string">' was applied to 4 files</span>
<span class="org-string">[info] Assembly up to date: /home/archbox/Documents/projects/jmhttp.scala/target/jmhttp-assembly-1.4.jar</span>
<span class="org-string">Created  = jmhttp</span>
<span class="org-string">Run it with java -jar jmhttp or ./jmhttp or sh jmhttp</span>
<span class="org-string">[success] Total time: 4 s, completed Jun 20, 2018 8:48:34 AM</span>
</pre>
</div>

<p>
Step 3: Test the server. 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ du -h jmhttp
5.4M    jmhttp
5.4M    total

<span class="org-comment-delimiter"># </span><span class="org-comment">Check the header </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">----------------------</span>
$ head -n 15 jmhttp
<span class="org-comment-delimiter">#</span><span class="org-comment">!/usr/bin/env sh</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Check if JAVA_HOME is Set </span>
<span class="org-keyword">if</span> [ -n <span class="org-string">"${JAVA_HOME}"</span> ]
<span class="org-keyword">then</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Check if JAVA is Installed in this JAVA_HOME</span>
    <span class="org-keyword">if</span> [ -f  <span class="org-string">"$JAVA_HOME/bin/java"</span> ] ;
    <span class="org-keyword">then</span>
        <span class="org-string">"$JAVA_HOME/bin/java"</span> -jar <span class="org-string">"$0"</span> <span class="org-string">"$@"</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">Try to use JAVA from $PATH Variable</span>
    <span class="org-keyword">else</span>
        <span class="org-comment-delimiter"># </span><span class="org-comment">Check if Java is Installed </span>
        <span class="org-keyword">if </span><span class="org-builtin">hash</span> java 2&gt;/dev/null;
        <span class="org-keyword">then</span>
            java -jar <span class="org-string">"$0"</span> <span class="org-string">"$@"</span>
        els
</pre>
</div>

<p>
Step 4: Run the program. 
</p>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Run as Unix executable </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-----------------------------------------------------</span>
$ ./jmhttp
jmhttp 1.4 - Micro http server for file sharing at local network.
<span class="org-function-name">Usage</span>: $ jmhttp [COMMAND] [OPTIONS] [&lt;ARGS&gt; ...]

<span class="org-function-name">Commands</span>:

  dir   Share single directory.                 
  mdir  Share multiple directories.             
  <span class="org-builtin">echo</span>  Run echo server for debugging purposes  

<span class="org-comment-delimiter"># </span><span class="org-comment">Run as shell script </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-----------------------------------------------------</span>
$ sh jmhttp
jmhttp 1.4 - Micro http server for file sharing at local network.
<span class="org-function-name">Usage</span>: $ jmhttp [COMMAND] [OPTIONS] [&lt;ARGS&gt; ...]

<span class="org-function-name">Commands</span>:

  dir   Share single directory.                 
  mdir  Share multiple directories.             
  <span class="org-builtin">echo</span>  Run echo server for debugging purposes 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run with java -jar </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-----------------------------------------------------</span>
$ java -jar jmhttp
jmhttp 1.4 - Micro http server for file sharing at local network.
<span class="org-function-name">Usage</span>: $ jmhttp [COMMAND] [OPTIONS] [&lt;ARGS&gt; ...]

<span class="org-function-name">Commands</span>:

  dir   Share single directory.                 
  mdir  Share multiple directories.             
  <span class="org-builtin">echo</span>  Run echo server for debugging purposes
</pre>
</div>

<p>
Install: 
</p>

<ul class="org-ul">
<li>In order to install, it is necessary just to move the server to any
directory in the $PATH environment variable. So, in Linux, MacOSX
or any other Unix-like OS, the program could be moved to /bin,
/usr/bin or ~/bin. 
</li>
</ul>

<p>
Once installed, the program can be run without ./ or absolute path ./path/jmhttp: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ jmhttp
jmhttp 1.4 - Micro http server for file sharing at local network.
<span class="org-function-name">Usage</span>: $ jmhttp [COMMAND] [OPTIONS] [&lt;ARGS&gt; ...]
  ... ... ... ... .... ....
</pre>
</div>

<p>
To install in the user directory without root permission, it is
necessary to create the directory: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ mkdir -p ~/bin

<span class="org-comment-delimiter"># </span><span class="org-comment">Add this line to the file ~/.bashrc or ~/.bash_profile </span>
$ export <span class="org-variable-name">PATH</span>=$<span class="org-variable-name">PATH</span>:~/bin

<span class="org-comment-delimiter"># </span><span class="org-comment">Move the program to ~/bin</span>
$ mv jmhttp ~/bin 
$ chmod +x ~/bin/jmhttp
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-3-2" class="outline-4">
<h4 id="sec-1-3-2"><span class="section-number-4">1.3.2</span> Building with jarget</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
The server requires scala as building dependency and  <a href="https://github.com/caiorss/jarget">jarget</a>  building
tool to fetch the dependencies and bundle them with the application.
</p>

<p>
To get jarget, just run: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ curl -o <span class="org-keyword">~/bin/jarget</span> -L https://github.com/caiorss/jarget/raw/v2.1.0-beta-release/jarget &amp;&amp; chmod +x ~/bin/jarget
</pre>
</div>

<p>
To build the server run: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ make force &amp;&amp; make sh-guard
</pre>
</div>

<p>
It will generate an unix-executable uber jar, namely "bin/jmhttp"
</p>

<div class="org-src-container">

<pre class="src src-sh">$ bin/jmhttp 
A micro Java/Scala http server to share files<span class="org-keyword"> in</span> the local network

<span class="org-function-name">Usage</span>: jmhttp [OPTIONS] ... [[DIRECTORY] | [URL:DIRECTORY] [URL:DIRECTORY] ...]

   ... ... ... ... ... ... ... ...... ... ... ...


$ java -jar bin/jmhttp
A micro Java/Scala http server to share files<span class="org-keyword"> in</span> the local network

<span class="org-function-name">Usage</span>: jmhttp [OPTIONS] ... [[DIRECTORY] | [URL:DIRECTORY] [URL:DIRECTORY] ...]

   -h, --help           Display this help and exit
   ... ... ... ... ... ... ... ...... ... ... ...


$ file bin/jmhttp 
<span class="org-function-name">bin/jmhttp</span>: a /usr/bin/env sh  script executable (binary data)

$ du -h bin/jmhttp
1.7M    bin/jmhttp
1.7M    total
</pre>
</div>

<p>
After building the jarget cache can be removed: 
</p>

<div class="org-src-container">

<pre class="src src-sh">$ jarget cache -jars 
/home/archbox/.jarget/cache/javax/jmdns/jmdns/3.4.1/jmdns-3.4.1.jar

$ jarget cache -path
/home/archbox/.jarget/cache

$ rm -rf /home/archbox/.jarget
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Binary release</h3>
<div class="outline-text-3" id="text-1-4">
<p>
The most update version can be downloaded from the link below or using
curl. 
</p>

<ul class="org-ul">
<li>Most up to date version <i>jmhttp - Download</i>
</li>

<li><a href="https://github.com/caiorss/jmhttp/raw/v1.0-release/jmhttp">jmhttp 1.0 Download</a>
</li>

<li><a href="https://github.com/caiorss/jmhttp/raw/1feb4ef04f15d8e8c4676f39b495b2eac4b8f473/jmhttp">jmhttp 1.1 Download</a>
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh">$ curl -O -L https://github.com/caiorss/jmhttp/raw/gh-pages/jmhttp
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   130  100   130    0     0     21      0  0:00:06  0:00:06 --:--:--    42
100 1703k  100 1703k    0     0   121k      0  0:00:14  0:00:14 --:--:--  475k

$ chmod +x jmhttp

$ ./jmhttp --version
jmhttp - v1.0

$ java -jar ./jmhttp --version
jmhttp - v1.0

$ sh ./jmhttp --version
jmhttp - v1.0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> <span class="todo TODO">TODO</span> Tasklist and future work</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li><code>[X]</code> - Implement logging
</li>

<li><code>[X]</code> - Implement a consistent command line handling.
</li>

<li><code>[X]</code> - Add Zeroconf - Network Service advertising.
</li>

<li><code>[X]</code> - Add basic HTTP authentication.
</li>

<li><code>[X]</code> - Implement cross-platform path expansion.
</li>

<li><code>[X]</code> - Implement Image Gallery 
</li>

<li><code>[&#xa0;]</code> - Add cookie-based authentication.
</li>

<li><code>[X]</code> - Supoport HTTPS/TLS security extension.
</li>

<li><code>[X]</code> - Create Unix daemon wrapper. 
</li>

<li><code>[X]</code> - Provide GIT-like subcommands.
</li>

<li><code>[&#xa0;]</code> - [MAYBE] GUI - Graphical User Interface
</li>

<li><code>[X]</code> - Create sbt file.
</li>

<li><code>[&#xa0;]</code> - Implement plain text human-readable configuration file. 
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Caio Rodrigues</p>
<p class="date">Created: 2018-06-20 Wed 09:07</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
